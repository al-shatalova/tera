<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <style>
        body{
            background-image: url("https://pulson.ru/wp-content/uploads/2012/01/purple_beach_landscape-wallpaper-1920x1080.jpg");
        }
        form{
            font-size: x-large;
            font-family: "Noto Sans JP", sans-serif;
            text-align:  center;

        }
        .centered{
            text-align: center;
        }
        h1{
            text-align: center;
        }

    </style>
    <title>Лаба 4</title>

    <script crossorigin src="https://unpkg.com/react@16/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@16/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/6.25.0/babel.min.js"></script>
</head>
<body>
<div id="app"></div>

</body>
<script type="text/babel">


    class Hello extends React.Component {
        render() {
            return <h1 className="centered">Привет</h1>;
        }
    }
    class Timer extends React.Component {
        constructor(props) {
            super(props);
            this.state = { seconds: 0 };
        }
        tick() {
            this.setState(state => ({
                seconds: state.seconds + 1
            }));
        }
        componentDidMount() {
            this.interval = setInterval(() => this.tick(), 1000);
        }
        componentWillUnmount() {
            clearInterval(this.interval);
        }
        render() {
            return (
                <div className="centered">
                    От момента запуска прошло: {this.state.seconds} секунд
                </div>
            );
        }
    }
    class Clock extends React.Component {
        constructor(props) {
            super(props);
            this.state = {
                time: new Date().toLocaleString()
            };
        }
        render() {
            return (
                <p className="App-clock centered" >
                    Дата и время: {this.state.time}.
                </p>
            );
        }
    }
    class UserForm extends React.Component {
        constructor(props) {
            super(props);
            const name = props.name;
            this.state = {
                name: name
            };
            this.handleSubmit = this.handleSubmit.bind(this);
        }

        handleSubmit(e) {
            e.preventDefault();
            if (this.refs.nameField.state.nameValid === true) {
                alert("Привет,  " + this.refs.nameField.state.name);
            }
        }

        render() {
            return (
                <form onSubmit={this.handleSubmit}>
                    <NameField name={this.state.name} ref="nameField"/>
                    <input type="submit" value="Отправить"/>
                </form>
            );
        }
    }




    class NameField extends React.Component {

        constructor(props) {
            super(props);
            const valid = this.validate(props.name)
            this.state = {name: props.name, nameValid: valid}
            this.onChange = this.onChange.bind(this);
        }

        validate(val) {
            return val.length > 2;
        }

        onChange(e) {
            const val = e.target.value;
            const valid = this.validate(val);
            this.setState({name: val, nameValid: valid});
        }

        render() {
            const nameColor = this.state.nameValid === true ? "green" : "red";
            return (
                <p>
                    <label>Укажите ваше имя:<br/>
                        <input type="text" value={this.state.name}
                               onChange={this.onChange}
                               style={{borderColor: nameColor}}/>
                    </label>
                </p>
            );
        }
    }


    ReactDOM.render(
        <div>
            <Hello/>
            <Timer/>
            <Clock/>
            <UserForm name="" age="0"/>
        </div>,
        document.getElementById("app")
    )
</script>
</html>